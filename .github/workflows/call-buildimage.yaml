name: CI Workflow

on:
  workflow_dispatch:
    branch:
      - feature-MOVE-3649-oppgradere-service-registry-pipeline
  push:
    branches:
      - '*'
  pull_request:
    types: [ ]  # Empty list ensures PRs are not triggered. Trigger nytt bygg..........

jobs:

  build:
    runs-on: ubuntu-latest
    steps:

      - uses: actions/checkout@v3
      - name: Set up JDK 11
        uses: actions/setup-java@v3
        with:
          distribution: 'liberica'
          java-version: 11
      - uses: s4u/maven-settings-action@v2.8.0
        with:
          servers: |
            [{
            "id": "github",            
            "username": "${{ secrets.EFORMIDLING_MAVEN_USER }}",
            "password": "${{ secrets.EFORMIDLING_MAVEN_PASSWORD }}"
            }]
      - name: Build with Maven
        run: |
          mvn -B clean install --update-snapshots